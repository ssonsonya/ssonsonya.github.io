---
layout: post
title: 걷기모션을 더욱 자연스럽게 해주는 방법
date: 2023-11-13
category: 
 - portfolio
 - p-UE4
tag:
 - 1|Animation
 - 1|Animation-Modifier
 - 1|AnimNotify
 - 1|Foot-Plant
 - 1|Footstep
 - 1|Sound-Cue
 - 1|Physical-Material
thumbnail: /style/image/portfolio_thumbnails/UE4/Anim_Modifier.png
icon: game
related: 
 - /2023-10-12-UE4-FootIK
---

다수의 애니메이션에 일괄 적용 가능한 `Animation Modifier`로 `Foot-Plant` 기능구현 성공기
![AnimModifier](https://github.com/ssonsonya/ssonsonya.github.io/assets/116151781/f63821db-d037-4dcd-9b83-89c041604f5e)

* content
{:toc}

## 요약

- 주요 문제 :  
    캐릭터 모션 중 발바닥이 지면에 닿는 지점에 줄 수있는 효과와 기술구현을 위해 대량의 애니메이션에 수작업으로 Notify를 하나하나 추가하는 비생산적 단순반복 작업 진행   
- 해결 방안 :  
    `Animation Modifier`로 애니메이션의 Foot본의 최저 X값 산출, curve와 AnimNotifier 자동생성
- 그 외 시도한 방법 : 
    - Root-중앙 위치 통과 지점 산출  
- 이루어낸 성과 :  
    1. 다수의 애니메이션에 일괄적으로 Foot-Plant Notify 추가 및 목표한 효과 단시간에 설정 가능
    2. 애니메이션과 본 트랜스폼에 대한 이해  
    3. 주어진 에셋에 제한된 결과물 보단 내 입맛에 맞게 커스터마이징하고 싶은 개발욕심 충족  

---

언리얼의 `FootIK` 상세방법은 관련 Post를 참고해주세요  
> [UE4(BP & C++) FootIK 적용](2023-10-11-UE4-FootIK)

## Animation Modifier
![image](https://github.com/ssonsonya/ssonsonya.github.io/assets/116151781/ecf315ea-ecf6-48d0-add9-dc9e8f48806a)  

### Add Curve & Notifier
- Add Curve
- Add Notify Track
- Add Curve Keys
- Add Notify Events

### Minimum Pos-X 구하기

### Local → Component 변환
다른 블루프린트에선 본의 트랜스폼의 스페이스변환 함수가 있지만 [^#], Modifier에는 프레임 또는 시간당 본의 Localspace Transform를 반환하는 함수만 사용할 수 있다.  
이번 기회에 Localspace에서 Root 대비 트랜스폼 변환을 계산하는 방법을 알아보았다.

### Apply
 - Test Mode
 - 방향 구현
 - Tolerance Range

## Footstep Sound

### Sound Cue

### Sound Attenuation

### Physical Material

## Reference

[Giuseppe Portelli(2017.11.1). A clockwork berry. Automated foot sync markers using animation modifiers in Unreal Engine](http://www.aclockworkberry.com/automated-foot-sync-markers-using-animation-modifiers-unreal-engine/)  
[TechAnim Studios(2020.08.15). YouTube. UE4 Animation Modifier-Automated Foot Sync Markers-#UE4#UE4Tuts](https://www.youtube.com/watch?v=UEcbYBmd-oc)  
[Unreal Engine. Unreal Engine Documentation. Convert Spaces 노드](https://docs.unrealengine.com/4.26/ko/AnimatingObjects/SkeletalMeshAnimation/NodeReference/SpaceConversion/)  
[Unreal Engine. Unreal Engine Documentation. Get Bone Poses for Frame](https://docs.unrealengine.com/4.26/en-US/BlueprintAPI/AnimationBlueprintLibrary/Pose/GetBonePosesforFrame/)  
