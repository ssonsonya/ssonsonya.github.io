---
layout: post
title: 사무용 노트북으로도 작업가능한 최적화기법
date: 2023-12-1
category: 
 - portfolio
 - p-UE4
tag:
 - 1|최적화
 - 1|Merge-Mesh
 - 1|HLOD
 - 1|CullDistanceVolume
thumbnail: /style/image/portfolio_thumbnails/UE4/RenderOpt.png
icon: game
---

고사양 레벨 애셋 사용을 위한 언리얼의 다양한 랜더링 프로파일링 기능 정리 및 최적화 적용사례 기록  

* content
{:toc}

## 요약

- 주요 문제 : 고사양을 요구하는 백그라운드 애셋 적용 시 심각한 프레임드랍으로 작업 불가
- 해결 방안 : `Mesh Merge`와 `HLOD`를 활용해 비용절감 
- 그 외 시도한 방법들 : 
    1. 에디터 그래픽 설정 변경
    2. Mesh LOD 설정 조율 : Triangle 수 최소화
    3. `Cull Distance Volume` 활용 카메라 거리에 따른 드로우 조정
    4. `Mesh Collision` 설정
- 이루어낸 성과 :  
    1. 작업환경에 제한받지 않는 최적화 기법으로 작업 완료

---
- 작업환경 주요 SPEC  

    | CPU | GPU |
    | :---: | :---: |
    | intel i7 4코어 6스레드 | 내장 |

- 사용한 애셋 정보

- 레벨 애셋 적용 후 랜더링 상태   

    | DrawCallMesh | TrianglesDrawn |
    | :---: | :---: |
    | 2556.30 | 84,778,600 |

---

## 랜더링 비용 확인방법

[문브러쉬 님의 유튜브](https://youtu.be/maHHsDd3j5A?feature=shared) [^11] 영상을 통해 적용사례를 확인하고, [언리얼엔진 문서](https://dev.epicgames.com/documentation/ko-kr/unreal-engine/optimizing-and-debugging-projects-for-real-time-rendering-in-unreal-engine) [^12] 를 통해 개념을 이해했습니다.  

| 구분 | 내용 |
| :---: | :---: |
| (cmd) stat scenerendering | 뷰포트의 랜더링정보 통계자료 조회 (DrawCallMesh) |
| (cmd) stat RHI | RHI 메모리 및 퍼포먼스 통계 (Triangles Drawn) |
| (cmd) stat unit & unitgraph | 밀리초단위의 CPU와 GPU사용량 |
| 창 > 통계 | 라이팅, 텍스쳐, 프리미티브 관련 데이터 통계 확인 (오브젝트 당 Tri) |


+ 뷰포트에서의 DrawCall / Triangles Drawn 확인  
    런타임, 에디터에서 확인 가능하며 에디터에선 STAT표시 토글 : Shift+L 가능  
    \`cmd 호출 > `stat scenerendering`
    ![image](https://github.com/user-attachments/assets/bb6d58e6-040e-4c73-8870-3471443545b4)  
    \`cmd 호출 > `stat RHI`  
    ![image](https://github.com/user-attachments/assets/a881f36c-8d3a-4cdf-8ff8-8c7f3df87ccf)  

+ CPU와 GPU사용량 확인
    \`cmd 호출 > `stat unit` `stat unitgraph`
    <img align="center" width="500" src="https://github.com/user-attachments/assets/91c38b67-83e9-48b4-9dd9-479a0cc950f4">


+ 프리미티브 통계정보 확인  
    창 > 통계
    ![image](https://github.com/user-attachments/assets/fe349d1d-1a73-45f8-b74b-8bf0f70f4060)  

## Mesh Merge

## HLOD

### Nanite

## 그 외 시도한 방법들

### 에디터 그래픽설정
### Mesh LOD설정
### Cull Distance Volume

## 생각정리

## Reference

[^11]:[문브러쉬(2023.1.12). YouTube. 언리얼엔진 드로우콜 확인하기](https://youtu.be/maHHsDd3j5A?feature=shared)  
[^12]: [Unreal Engine. Unreal Engine Documentation. 실시간 렌더링을 위한 프로젝트 최적화 및 디버깅](https://dev.epicgames.com/documentation/ko-kr/unreal-engine/optimizing-and-debugging-projects-for-real-time-rendering-in-unreal-engine)  


[Unreal Engine Documentation. Cull Distance Volume](https://dev.epicgames.com/documentation/ko-kr/unreal-engine/cull-distance-volume?application_version=4.27)