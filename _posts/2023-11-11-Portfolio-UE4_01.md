---
layout: post
title: Mixamo 애니메이션 리타깃 꿀팁
date: 2023-11-11
category: 
 - portfolio
 - p-UE4
tag:
 - 1|Animation
 - 1|Retarget
 - 1|Bone-Transform
 - 1|Mixamo
thumbnail: /style/image/portfolio_thumbnails/UE4/Retarget.png
icon: game
---

플러그인 없이 임포트한 외부 애니메이션을 쉽게 `Retarget` 하는 방법과 한 땀 한 땀 본 트렌스폼 작업 후기

* content
{:toc}

## 요약

- 주요 문제 : 임포트한 Mixamo 애니메이션 리타깃 중 본 본구조와 포즈의 차이로 뒤틀림 현상 발생
- 해결 방안 : 캐릭터의 스켈레톤에 믹사모의 T-Pose를 적용해 리타깃
- 그 외 시도한 방법들 : 
    1. 블렌더 루트 본 생성 작업
    2. 본 트랜스폼 애디티브 수정 후 애니메이션 생성
    3. 스켈레톤 할당으로 다수의 스켈레탈 메시와 스켈레톤 공유
- 이루어낸 성과 :  
    1. 목표한 기능 구현
    2. 주어진 에셋에 제한된 결과물 보단 내 입맛에 맞게 커스터마이징하고 싶은 개발 욕심 충족  
    3. 애니메이션과 본 트랜스폼에 대한 이해  

    *UE5에 지원되는 기능 또는 각종 Retargating Helper [^11] Plugin들을 사용할 수 있지만, 이후 심화적인 작업에 도움이 될 것 같아 스스로 학습을 위해 다양한 시도를 해보았고, 예상보다 쉬운 방법을 알아낼 수 있었습니다*

```
PPT 요약 이미지 삽입
```

## Retarget

언리얼의 `Retarget` 상세방법은 관련 Post를 참고해주세요  
> [UE5 리타깃 어떻게 달라졌을까](2023-10-11-UE5-RetargetUpdate)

각 본들의 미세한 회전 각들은 모두 애니메이션 리타깃 시 영향을 주기 때문에 리타깃을 할 때 가장 중요한 부분은 리타깃을 하는 두 `Skeleton`의 `Retarget Base Pose`가 정확히 동일해야 한다는 점이다  

> [(Unreal Engine Documentation > Retarget Manager)](https://docs.unrealengine.com/4.26/en-US/AnimatingObjects/SkeletalMeshAnimation/Persona/BasePoseManager/) [^21]  
When we retarget animations for Skeletons that have more similar Base Poses, we get better-looking results  


두 팔의 위치, 각 등허리를 구성한 본들이 구부러진 정도, 두 다리의 벌어진 정도 등 오차가 크지 않으면 당장 눈에 띄지 않을 수 있지만, 더 많은 애니메이션들을 리타깃하고 변형 시 언제 어떻게 뒤틀릴지 모르는 일이다  
무료 애니메이션 애셋들을 찾아 다양한 출처를 옮겨다니면 이러한 미세한 오차 등 문제에 취약할 수 밖에 없고, 실제로 나의 프로젝트에도 애니메이션 뒤틀림 문제가 생겼다  

Mixamo의 애니메이션을 YBot skeleton으로 임포트한 뒤 YBot의 Base pose를 UE4 Mannequin과 유사하게 변형 후 프로젝트의 캐릭터 skeleton으로 리타깃을 하는 과정에서 본들의 회전각 오차로 틀어짐이 발생한 문제였다  

```
이미지 삽입하기
```

Mixamo의 애니메이션들의 Base pose인 T-Pose는 Mixamo 홈페이지에서 내려받을 수 있으며, UE4 Mannequin을 업로드하여 정확한 포즈를 임포트할 수 있다

## Blender Root

## Bone Trasform

## Unite Skeleton

## Reference

[^11]: [TLL(2023.09.23). Unreal Engine Marketplace. Free Bone Snapper](https://www.unrealengine.com/marketplace/en-US/product/free-bone-snapper)
[^21]: [Unreal Engine. Documentation. Retarget Manager](https://docs.unrealengine.com/4.26/en-US/AnimatingObjects/SkeletalMeshAnimation/Persona/BasePoseManager/)
 [Giuseppe Portelli(2017.11.1). A clockwork berry. Automated foot sync markers using animation modifiers in Unreal Engine](http://www.aclockworkberry.com/automated-foot-sync-markers-using-animation-modifiers-unreal-engine/)  
[OpenReality(2023.02.02).YouTube. Fix Mixamo Root Motion Animations in Unreal Engine | UE4](https://www.youtube.com/watch?v=gq8k5ZOBjww)  
[enjiop(2022). GitHub. Mixamo_converter](https://github.com/enziop/mixamo_converter)  
[Blender Foundation. Blender. Download](https://www.blender.org/download/) 4.0.2  
