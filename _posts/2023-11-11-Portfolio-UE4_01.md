---
layout: post
title: 애니메이션 리타깃 꿀팁과 디테일 작업
date: 2023-11-11
category: 
 - portfolio
 - p-UE4
tag:
 - 1|Animation
 - 1|Retarget
 - 1|Bone-Transform
 - 1|Mixamo
thumbnail: /style/image/portfolio_thumbnails/UE4/Retarget.png
icon: game
---

플러그인 없이 임포트한 외부 애니메이션을 쉽게 `Retarget` 하는 방법과 한 땀 한 땀 본 트렌스폼 작업 후기

* content
{:toc}

## 요약

- 주요 문제 : 임포트한 Mixamo 애니메이션 리타깃 중 본 본구조와 포즈의 차이로 뒤틀림 현상 발생
- 해결 방안 : 캐릭터의 스켈레톤에 믹사모의 T-Pose를 적용해 리타깃
- 그 외 시도한 방법들 : 
    1. 블렌더 루트 본 생성 작업
    2. 본 트랜스폼 애디티브 수정 후 애니메이션 생성
- 이루어낸 성과 :  
    1. 목표한 기능 구현
    2. 주어진 에셋에 제한된 결과물 보단 내 입맛에 맞게 커스터마이징하고 싶은 개발 욕심 충족  
    3. 애니메이션과 본 트랜스폼에 대한 이해  

    *UE5에 지원되는 기능 또는 각종 Retargating Helper [^1] Plugin들을 사용할 수 있지만, 이후 심화적인 작업에 도움이 될 것 같아 스스로 학습을 위해 다양한 시도를 해보았고, 예상보다 쉬운 방법을 알아낼 수 있었습니다*

## Retarget

언리얼의 `Retarget` 상세방법은 관련 Post를 참고해주세요  
> [UE5 리타깃 어떻게 달라졌을까](2023-10-11-UE5-RetargetUpdate)

리타깃을 할 때 가장 중요한 부분은 리타깃을 하는 두 `Skeleton`의 `Retarget Base Pose`가 정확히 동일해야 한다는 점이다  
언리얼의 기본 Thrid Person Character의 Skeleton Retarget Base Pose는 A-Pose 상태로, 차렷자세에서 어깨부근 `UpperArm`본을 약 40.3˚ 벌린 자세이다  

같은 인간형이고 기본자세이더라도 언리얼의 기본 Skeleton과 동일한 애셋으로 만들어진 애니메이션이 아닌이상,  
두 팔의 위치, 각 등허리를 구성한 본들이 구부러진 정도, 두 다리의 벌어진 정도, 그 속에 더욱 세세한 각 본들의 회전 각들은 모두 애니메이션 리타깃 시 영향을 준다  
오차가 크지 않으면 당장에 눈에 띄지 않을 수 있지만, 더 많은 애니메이션들을 리타깃하고 변형 시 언제 어떻게 뒤틀릴지 모르는 일이다  
무료 애셋들을 찾아 다양한 출처를 옮겨다니고 있기 때문에 이러한 문제에 취약할 수 밖에 없다

## Notifier


## Reference

[^1]: [TLL(2023.09.23). Unreal Engine Marketplace. Free Bone Snapper](https://www.unrealengine.com/marketplace/en-US/product/free-bone-snapper)
[Giuseppe Portelli(2017.11.1). A clockwork berry. Automated foot sync markers using animation modifiers in Unreal Engine](http://www.aclockworkberry.com/automated-foot-sync-markers-using-animation-modifiers-unreal-engine/)  
[OpenReality(2023.02.02).YouTube. Fix Mixamo Root Motion Animations in Unreal Engine | UE4](https://www.youtube.com/watch?v=gq8k5ZOBjww)  
[enjiop(2022). GitHub. Mixamo_converter](https://github.com/enziop/mixamo_converter)
[Blender Foundation. Blender. Download](https://www.blender.org/download/) 4.0.2
